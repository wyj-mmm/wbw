"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Cart=function(){function t(){_classCallCheck(this,t),this.blank=$(".blank"),this.init()}return _createClass(t,[{key:"init",value:function(){var t=window.localStorage,e=t.getItem("carts")?t.getItem("carts"):"";if(e){var n=convertStrToObj(e),a=$(".cartList");for(var r in n){var i=n[r],o=document.createElement("ul");o.className="goodInfo",o.setAttribute("data-good-id",r);var l='\n                    <li><img src="'.concat(i.src,'" /></li>\n                    <li>').concat(i.name,"</li>\n                    <li>").concat(i.price,'</li>\n                    <li class="num">\n                        <a href="javascript:;" class="minus">-</a>\n                        <input type="text" name="" id="" value="').concat(i.num,'" />\n                        <a href="javascript:;" class="plus">+</a>\n                    </li>\n                    <li class="total">').concat(i.price*i.num,'</li>\n                    <li><a href="javascript:;" class="del">删除</a></li>\n                ');o.innerHTML=l,a.appendChild(o)}for(var c=document.querySelectorAll(".goodInfo .minus"),s=0,u=c.length;s<u;s++)c[s].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=e.getItem("carts")?e.getItem("carts"):"",a=convertStrToObj(n);1<a[t].num&&a[t].num--,e.setItem("carts",JSON.stringify(a)),this.nextElementSibling.value=a[t].num,this.parentNode.nextElementSibling.innerHTML=a[t].price*a[t].num};for(var d=document.querySelectorAll(".goodInfo .plus"),m=0,g=d.length;m<g;m++)d[m].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=e.getItem("carts")?e.getItem("carts"):"",a=convertStrToObj(n);a[t].num++,e.setItem("carts",JSON.stringify(a)),this.previousElementSibling.value=a[t].num,this.parentNode.nextElementSibling.innerHTML=a[t].price*a[t].num};for(var f=document.querySelectorAll(".goodInfo .num input"),p=0,v=f.length;p<v;p++)f[p].onblur=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=e.getItem("carts")?e.getItem("carts"):"",a=convertStrToObj(n);(isNaN(this.value)||this.value<1)&&(this.value=1),a[t].num=this.value,e.setItem("carts",JSON.stringify(a)),this.parentNode.nextElementSibling.innerHTML=a[t].price*a[t].num};for(var h=document.querySelectorAll(".goodInfo .del"),b=0,S=h.length;b<S;b++)h[b].onclick=function(){var t=this.parentNode.parentNode.getAttribute("data-good-id"),e=window.localStorage,n=e.getItem("carts")?e.getItem("carts"):"",a=convertStrToObj(n);delete a[t],e.setItem("carts",JSON.stringify(a)),this.parentNode.parentNode.remove()}}else this.blank.style.display="block"}}]),t}();window.onload=function(){new Cart};